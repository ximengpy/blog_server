{"remainingRequest":"D:\\study\\project\\blogadmin\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\study\\project\\blogadmin\\client\\src\\views\\Admin\\Article\\ArticleManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\study\\project\\blogadmin\\client\\src\\views\\Admin\\Article\\ArticleManage.vue","mtime":1586779101185},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvUGFnaW5hdGlvbiI7CmltcG9ydCB7CiAgZ2V0QXJ0aWNsZUluZm8sCiAgZ2V0QXJ0aWNsZSwKICBkZWxldGVBcnRpY2xlLAogIHVwZGF0ZUFydGljbGV9IGZyb20gJy4uLy4uLy4uL2FwaScKaW1wb3J0IEFydGljbGVFZGl0IGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvQXJ0aWNsZUVkaXQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFydGljbGVNYW5hZ2UiLAogIGNvbXBvbmVudHM6e1BhZ2luYXRpb24sQXJ0aWNsZUVkaXR9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGFydGljbGVMaXN0IDogW10sCgogICAgICAvL+WIhumhtQogICAgICB0b3RhbDowLAoKICAgICAgLy/nvJbovpEKICAgICAgZGlhbG9nVmlzaWJsZSA6IGZhbHNlLAogICAgICBkZWZhdWx0RGF0YSA6IG51bGwsCgogICAgICAvLwogICAgICBQYWdpbmF0aW9uSW5kZXggOiAxLAogICAgICBQYWdpbmF0aW9uU2l6ZSA6IDUKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgaGFuZGxlRWRpdChpbmRleCxyb3cpewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmRlZmF1bHREYXRhID0gcm93OwogICAgfSwKICAgIGhhbmRsZURlbGV0ZShpbmRleCxyb3cpewogICAgICBkZWxldGVBcnRpY2xlKHJvdy5faWQpLnRoZW4ocmVzPT57CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbiA6IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5hcnRpY2xlTGlzdC5zcGxpY2UoaW5kZXgsMSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKT0+ewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pSIsCiAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgfSk7CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUGFnaW5hdGlvbkNsaWNrKGluZGV4LHNpemUpewogICAgICB0aGlzLlBhZ2luYXRpb25JbmRleCA9IGluZGV4OwogICAgICB0aGlzLlBhZ2luYXRpb25TaXplID0gc2l6ZTsKICAgICAgdGhpcy5jaGFuZ2VBcnRpY2xlTGlzdCgpOwogICAgICB0aGlzLmNoYW5nZUFydGljbGVJbmZvVG90YWwoKTsKICAgIH0sCgogICAgaGFuZGxlU3VibWl0KGRhdGEpewogICAgICB1cGRhdGVBcnRpY2xlKHRoaXMuZGVmYXVsdERhdGEuX2lkLGRhdGEpCiAgICAgICAgLnRoZW4ocmVzPT57CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pu05paw5oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VBcnRpY2xlTGlzdCgpOwogICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgfSwxMDAwKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmm7TmlrDlpLHotKUiLAogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuabtOaWsOWksei0pSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIGR1cmF0aW9uIDogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKXsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIGNoYW5nZUFydGljbGVMaXN0KCl7CiAgICAgIGxldCBza2lwID0gdGhpcy5QYWdpbmF0aW9uU2l6ZSoodGhpcy5QYWdpbmF0aW9uSW5kZXgtMSk7CiAgICAgIGdldEFydGljbGUoc2tpcCx0aGlzLlBhZ2luYXRpb25TaXplKQogICAgICAgIC50aGVuKHJlcz0+ewogICAgICAgICAgdGhpcy5hcnRpY2xlTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGNoYW5nZUFydGljbGVJbmZvVG90YWwoKXsKICAgICAgZ2V0QXJ0aWNsZUluZm8oKQogICAgICAgIC50aGVuKHJlcz0+ewogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGE/cmVzLmRhdGEuZGF0YS5udW06MDsKICAgICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvL+ivt+axguaWh+eroOS/oeaBrwogICAgdGhpcy5jaGFuZ2VBcnRpY2xlSW5mb1RvdGFsKCk7CgogICAgLy/or7fmsYLliJ3lp4vmlofnq6AKICAgIHRoaXMuY2hhbmdlQXJ0aWNsZUxpc3QoKTsKICB9Cn0KCg=="},{"version":3,"sources":["ArticleManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ArticleManage.vue","sourceRoot":"src/views/Admin/Article","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n        :data=\"articleList\"\r\n        style=\"width: 100%\">\r\n      <el-table-column\r\n          label=\"标题\"\r\n          width=\"180\"\r\n          prop=\"title\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"时间\"\r\n          width=\"180\"\r\n          prop=\"date\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"分类\"\r\n          width=\"180\"\r\n          prop=\"type\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"标签\"\r\n          width=\"180\"\r\n          prop=\"tag\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n              size=\"mini\"\r\n              @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n          <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <Pagination\r\n        :pageSize=\"5\"\r\n        :total=\"total\"\r\n        @currentChange=\"handlePaginationClick\"\r\n    ></Pagination>\r\n    <el-dialog\r\n        title=\"提示\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"60%\"\r\n        :before-close=\"handleClose\"\r\n        :close-on-click-modal=\"false\"\r\n    >\r\n      <ArticleEdit\r\n          @handleSubmit=\"handleSubmit\"\r\n          :default-data=\"defaultData\"\r\n      ></ArticleEdit>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Pagination from \"../../../components/Pagination\";\r\n  import {\r\n    getArticleInfo,\r\n    getArticle,\r\n    deleteArticle,\r\n    updateArticle} from '../../../api'\r\n  import ArticleEdit from \"../../../components/ArticleEdit\";\r\n  export default {\r\n    name: \"ArticleManage\",\r\n    components:{Pagination,ArticleEdit},\r\n    data(){\r\n      return {\r\n        articleList : [],\r\n\r\n        //分页\r\n        total:0,\r\n\r\n        //编辑\r\n        dialogVisible : false,\r\n        defaultData : null,\r\n\r\n        //\r\n        PaginationIndex : 1,\r\n        PaginationSize : 5\r\n      }\r\n    },\r\n    methods:{\r\n      handleEdit(index,row){\r\n        this.dialogVisible = true;\r\n        this.defaultData = row;\r\n      },\r\n      handleDelete(index,row){\r\n        deleteArticle(row._id).then(res=>{\r\n          if (res.data.code === 0) {\r\n            this.$message({\r\n              message: \"删除成功\",\r\n              type: 'success',\r\n              duration : 2000\r\n            });\r\n            this.articleList.splice(index,1);\r\n          }\r\n        }).catch(()=>{\r\n          this.$message({\r\n            message: \"删除失败\",\r\n            type: 'error',\r\n            duration : 2000\r\n          });\r\n        })\r\n      },\r\n      handlePaginationClick(index,size){\r\n        this.PaginationIndex = index;\r\n        this.PaginationSize = size;\r\n        this.changeArticleList();\r\n        this.changeArticleInfoTotal();\r\n      },\r\n\r\n      handleSubmit(data){\r\n        updateArticle(this.defaultData._id,data)\r\n          .then(res=>{\r\n            if (res.data.code === 0) {\r\n              this.$message({\r\n                message: \"更新成功\",\r\n                type: 'success',\r\n                duration : 2000\r\n              });\r\n              setTimeout(()=>{\r\n                this.changeArticleList();\r\n                this.handleClose();\r\n              },1000)\r\n            }else{\r\n              this.$message({\r\n                message: \"更新失败\",\r\n                type: 'error',\r\n                duration : 2000\r\n              });\r\n            }\r\n          })\r\n          .catch(()=>{\r\n            this.$message({\r\n              message: \"更新失败\",\r\n              type: 'error',\r\n              duration : 2000\r\n            });\r\n          });\r\n      },\r\n      handleClose(){\r\n        this.dialogVisible = false;\r\n      },\r\n\r\n      changeArticleList(){\r\n        let skip = this.PaginationSize*(this.PaginationIndex-1);\r\n        getArticle(skip,this.PaginationSize)\r\n          .then(res=>{\r\n            this.articleList = res.data.data;\r\n          });\r\n      },\r\n\r\n      changeArticleInfoTotal(){\r\n        getArticleInfo()\r\n          .then(res=>{\r\n            this.total = res.data.data?res.data.data.num:0;\r\n          });\r\n      }\r\n    },\r\n    mounted() {\r\n      //请求文章信息\r\n      this.changeArticleInfoTotal();\r\n\r\n      //请求初始文章\r\n      this.changeArticleList();\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}