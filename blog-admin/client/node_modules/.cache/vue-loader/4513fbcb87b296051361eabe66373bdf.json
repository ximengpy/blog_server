{"remainingRequest":"D:\\study\\project\\blogadmin\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\study\\project\\blogadmin\\client\\src\\views\\Admin\\User\\UserAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\study\\project\\blogadmin\\client\\src\\views\\Admin\\User\\UserAdmin.vue","mtime":1586786922221},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0VXNlckxpc3QsZGVsZXRlVXNlcix1cGRhdGVVc2VyfSBmcm9tICcuLi8uLi8uLi9hcGknOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyQWRtaW4iLAogIGNvbXBvbmVudHM6e30sCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgdXNlckxpc3QgOiBbXSwKICAgICAgbWV0YURhdGEgOiBbXQogICAgfQogIH0sCiAgbWV0aG9kczp7CiAgICBoYW5kbGVTYXZlKGluZGV4LHJvdyl7CiAgICAgIHVwZGF0ZVVzZXIocm93Ll9pZCx7ZGlzYWJsZWQ6cm93LmRpc2FibGVkLGFkbWluOnJvdy5hZG1pbn0pCiAgICAgICAgLnRoZW4ocmVzPT57CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2UgOiAi5pu05paw5oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlIDogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIGR1cmF0aW9uIDogMjAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlIDogIuabtOaWsOWksei0pSIsCiAgICAgICAgICAgICAgdHlwZSA6ICJlcnJvciIsCiAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZSA6ICLmm7TmlrDlpLHotKUiLAogICAgICAgICAgICB0eXBlIDogImVycm9yIiwKICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZURlbGV0ZShpbmRleCxyb3cpewogICAgICB0aGlzLiRjb25maXJtKCfljbPlsIbliKDpmaTor6XnlKjmiLflj4rlhbbnlZnoqIDnrYnmlbDmja4sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkKICAgICAgICAudGhlbigoKT0+ewogICAgICAgICAgZGVsZXRlVXNlcihyb3cuX2lkKQogICAgICAgICAgICAudGhlbihyZXM9PnsKICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0LnNwbGljZShpbmRleCwxKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip8iLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKT0+ewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pSIsCiAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCk9PnsKCiAgICAgICAgfSkKCiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKGluZGV4LHJvdyl7CiAgICAgIGxldCBtZXRhRGF0YSA9IHRoaXMubWV0YURhdGFbaW5kZXhdOwogICAgICByb3cuc3dpdGNoID0gbWV0YURhdGEuZGlzYWJsZWQgPT09IHJvdy5kaXNhYmxlZCAmJiBtZXRhRGF0YS5hZG1pbiA9PT0gcm93LmFkbWluOwogICAgfSwKCiAgICBnZXRVc2VyTGlzdCgpewogICAgICBnZXRVc2VyTGlzdCgpLnRoZW4ocmVzPT57CiAgICAgICAgdGhpcy5tZXRhRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgdGhpcy51c2VyTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOwogICAgICAgIHRoaXMudXNlckxpc3QuZm9yRWFjaChpdGVtPT4oaXRlbS5zd2l0Y2g9dHJ1ZSkpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgfQp9Cg=="},{"version":3,"sources":["UserAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAdmin.vue","sourceRoot":"src/views/Admin/User","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n        :data=\"userList\"\r\n        style=\"width: 100%\">\r\n      <el-table-column\r\n          label=\"用户名\"\r\n          width=\"180\"\r\n          prop=\"user\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"禁用\"\r\n          width=\"180\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.disabled\" @change=\"handleChange(scope.$index, scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"是否管理员\"\r\n          width=\"180\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.admin\" @change=\"handleChange(scope.$index, scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n              size=\"mini\"\r\n              type=\"success\"\r\n              :disabled=\"scope.row.switch\"\r\n              @click=\"handleSave(scope.$index, scope.row)\">保存</el-button>\r\n          <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {getUserList,deleteUser,updateUser} from '../../../api';\r\n\r\n  export default {\r\n    name: \"UserAdmin\",\r\n    components:{},\r\n    data(){\r\n      return {\r\n        userList : [],\r\n        metaData : []\r\n      }\r\n    },\r\n    methods:{\r\n      handleSave(index,row){\r\n        updateUser(row._id,{disabled:row.disabled,admin:row.admin})\r\n          .then(res=>{\r\n            if (res.data.code === 0) {\r\n              this.getUserList();\r\n              this.$message({\r\n                message : \"更新成功\",\r\n                type : \"success\",\r\n                duration : 2000\r\n              });\r\n            }else{\r\n              this.$message({\r\n                message : \"更新失败\",\r\n                type : \"error\",\r\n                duration : 2000\r\n              });\r\n            }\r\n          })\r\n          .catch(()=>{\r\n            this.$message({\r\n              message : \"更新失败\",\r\n              type : \"error\",\r\n              duration : 2000\r\n            });\r\n          })\r\n      },\r\n      handleDelete(index,row){\r\n        this.$confirm('即将删除该用户及其留言等数据, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        })\r\n          .then(()=>{\r\n            deleteUser(row._id)\r\n              .then(res=>{\r\n                this.userList.splice(index,1);\r\n                this.$message({\r\n                  message: \"删除成功\",\r\n                  type: 'success',\r\n                  duration : 2000\r\n                });\r\n              })\r\n              .catch(()=>{\r\n                this.$message({\r\n                  message: \"删除失败\",\r\n                  type: 'error',\r\n                  duration : 2000\r\n                });\r\n              })\r\n          })\r\n          .catch(()=>{\r\n\r\n          })\r\n\r\n      },\r\n      handleChange(index,row){\r\n        let metaData = this.metaData[index];\r\n        row.switch = metaData.disabled === row.disabled && metaData.admin === row.admin;\r\n      },\r\n\r\n      getUserList(){\r\n        getUserList().then(res=>{\r\n          this.metaData = res.data.data;\r\n          this.userList = JSON.parse(JSON.stringify(res.data.data));\r\n          this.userList.forEach(item=>(item.switch=true));\r\n        });\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getUserList();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}