{"remainingRequest":"D:\\study\\project\\blogadmin\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\study\\project\\blogadmin\\client\\src\\components\\ArticleEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\study\\project\\blogadmin\\client\\src\\components\\ArticleEdit.vue","mtime":1586616218498},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study\\project\\blogadmin\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgUmljaFRleHQgZnJvbSAiLi9SaWNoVGV4dCI7CmltcG9ydCBVcGxvYWQgZnJvbSAiLi9VcGxvYWQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFydGljbGVFZGl0IiwKICBjb21wb25lbnRzOntVcGxvYWQsUmljaFRleHR9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGZvcm0gOiB7CiAgICAgICAgdGl0bGUgOiB0aGlzLmRlZmF1bHREYXRhLnRpdGxlfHwiIiwKICAgICAgICB0eXBlIDogdGhpcy5kZWZhdWx0RGF0YS50eXBlfHwiIiwKICAgICAgICB0YWcgOiB0aGlzLmRlZmF1bHREYXRhLnRhZ3x8IiIsCiAgICAgICAgY29udGVudCA6IHRoaXMuZGVmYXVsdERhdGEuY29udGVudHx8IiIsCiAgICAgICAgc3VyZmFjZSA6IHRoaXMuZGVmYXVsdERhdGEuc3VyZmFjZXx8IiIKICAgICAgfSwKICAgICAgcnVsZXMgOiB7CiAgICAgICAgdHlwZSA6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oupdHlwZScgfV0sCiAgICAgICAgdGl0bGUgOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpXRpdGxlJyB9XSwKICAgICAgICB0YWcgOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpXRhZycgfV0sCiAgICAgICAgY29udGVudCA6IHsKICAgICAgICAgIHZhbGlkYXRvciA6IChydWxlLHZhbHVlLGNiKT0+ewogICAgICAgICAgICAoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICBpZiAodGhpcy5sYXllZGl0LmdldENvbnRlbnQodGhpcy5pbmRleCkpIHsKICAgICAgICAgICAgICAgIGNiKCk7CiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBjYihuZXcgRXJyb3IoIuivt+i+k+WFpeaWh+eroOWGheWuue+8gSIpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhbGwodGhpcy4kcmVmcy5yaWNoVGV4dCk7CiAgICAgICAgICB9LAogICAgICAgICAgcmVxdWlyZWQgOiB0cnVlCiAgICAgICAgfSwKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHMgOiBbImRlZmF1bHREYXRhIl0sCiAgd2F0Y2g6ewogICAgZGVmYXVsdERhdGEoKXsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIHRpdGxlIDogdGhpcy5kZWZhdWx0RGF0YS50aXRsZSwKICAgICAgICB0eXBlIDogdGhpcy5kZWZhdWx0RGF0YS50eXBlLAogICAgICAgIHRhZyA6IHRoaXMuZGVmYXVsdERhdGEudGFnLAogICAgICAgIGNvbnRlbnQgOiB0aGlzLmRlZmF1bHREYXRhLmNvbnRlbnQsCiAgICAgICAgc3VyZmFjZSA6IHRoaXMuZGVmYXVsdERhdGEuc3VyZmFjZQogICAgICB9CiAgICAgIHRoaXMuY2hhbmdlQ29udGVudEFuZFN1cmZhY2UoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgdXBsb2FkU3VjY2Vzcyh1cmwpewogICAgICB0aGlzLmZvcm0uc3VyZmFjZSA9IHVybDsKICAgIH0sCiAgICBvblN1Ym1pdChmb3JtTmFtZSl7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewoKICAgICAgICAgIHRoaXMuJGVtaXQoImhhbmRsZVN1Ym1pdCIsIHsKICAgICAgICAgICAgdHlwZTogdGhpcy5mb3JtLnR5cGUsCiAgICAgICAgICAgIHRpdGxlOiB0aGlzLmZvcm0udGl0bGUsCiAgICAgICAgICAgIHRhZzogdGhpcy5mb3JtLnRhZywKICAgICAgICAgICAgc3VyZmFjZTogdGhpcy5mb3JtLnN1cmZhY2UsCiAgICAgICAgICAgIGNvbnRlbnQ6IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGF5ZWRpdC5nZXRDb250ZW50KHRoaXMuaW5kZXgpOwogICAgICAgICAgICB9KS5jYWxsKHRoaXMuJHJlZnMucmljaFRleHQpCiAgICAgICAgICB9KTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZUNvbnRlbnRBbmRTdXJmYWNlKCl7CgogICAgfQogIH0sCn0K"},{"version":3,"sources":["ArticleEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ArticleEdit.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-form\r\n      ref=\"form\"\r\n      :model=\"form\"\r\n      label-width=\"80px\"\r\n      :rules=\"rules\"\r\n  >\r\n    <el-form-item label=\"分类\" prop=\"type\">\r\n      <el-select v-model=\"form.type\" placeholder=\"请选择分类\">\r\n        <el-option label=\"原创\" value=\"原创\"></el-option>\r\n        <el-option label=\"转载\" value=\"转载\"></el-option>\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"标题\" prop=\"title\">\r\n      <el-input v-model=\"form.title\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"标签\"  prop=\"tag\">\r\n      <el-select v-model=\"form.tag\" placeholder=\"请选择标签\">\r\n        <el-option label=\"HTML&Css\" value=\"HTML&Css\"></el-option>\r\n        <el-option label=\"JavaScript\" value=\"JavaScript\"></el-option>\r\n        <el-option label=\"Node\" value=\"Node\"></el-option>\r\n        <el-option label=\"Vue&React\" value=\"Vue&React\"></el-option>\r\n        <el-option label=\"Other\" value=\"Other\"></el-option>\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"内容\"  prop=\"content\">\r\n      <RichText :value=\"form.content\" ref=\"richText\"></RichText>\r\n    </el-form-item>\r\n    <el-form-item label=\"封面\">\r\n      <Upload @uploadSuccess=\"uploadSuccess\"></Upload>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button\r\n          type=\"primary\"\r\n          @click=\"onSubmit('form')\"\r\n      >发表文章</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\n\r\n  import RichText from \"./RichText\";\r\n  import Upload from \"./Upload\";\r\n  export default {\r\n    name: \"ArticleEdit\",\r\n    components:{Upload,RichText},\r\n    data(){\r\n      return {\r\n        form : {\r\n          title : this.defaultData.title||\"\",\r\n          type : this.defaultData.type||\"\",\r\n          tag : this.defaultData.tag||\"\",\r\n          content : this.defaultData.content||\"\",\r\n          surface : this.defaultData.surface||\"\"\r\n        },\r\n        rules : {\r\n          type : [{ required: true, message: '请选择type' }],\r\n          title : [{ required: true, message: '请输入title' }],\r\n          tag : [{ required: true, message: '请输入tag' }],\r\n          content : {\r\n            validator : (rule,value,cb)=>{\r\n              (function(){\r\n                if (this.layedit.getContent(this.index)) {\r\n                  cb();\r\n                }else{\r\n                  cb(new Error(\"请输入文章内容！\"));\r\n                }\r\n              }).call(this.$refs.richText);\r\n            },\r\n            required : true\r\n          },\r\n        }\r\n      }\r\n    },\r\n    props : [\"defaultData\"],\r\n    watch:{\r\n      defaultData(){\r\n        this.form = {\r\n          title : this.defaultData.title,\r\n          type : this.defaultData.type,\r\n          tag : this.defaultData.tag,\r\n          content : this.defaultData.content,\r\n          surface : this.defaultData.surface\r\n        }\r\n        this.changeContentAndSurface();\r\n      }\r\n    },\r\n    methods:{\r\n      uploadSuccess(url){\r\n        this.form.surface = url;\r\n      },\r\n      onSubmit(formName){\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n\r\n            this.$emit(\"handleSubmit\", {\r\n              type: this.form.type,\r\n              title: this.form.title,\r\n              tag: this.form.tag,\r\n              surface: this.form.surface,\r\n              content: (function () {\r\n                return this.layedit.getContent(this.index);\r\n              }).call(this.$refs.richText)\r\n            });\r\n\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      changeContentAndSurface(){\r\n\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}