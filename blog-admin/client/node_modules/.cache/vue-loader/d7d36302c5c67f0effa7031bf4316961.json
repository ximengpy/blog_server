{"remainingRequest":"F:\\blog_server2\\blog-admin\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\blog_server2\\blog-admin\\client\\src\\views\\Admin\\Article\\ArticleManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\blog_server2\\blog-admin\\client\\src\\views\\Admin\\Article\\ArticleManage.vue","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1595078120000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvUGFnaW5hdGlvbiI7CmltcG9ydCB7CiAgZ2V0QXJ0aWNsZUluZm8sCiAgZ2V0QXJ0aWNsZSwKICBkZWxldGVBcnRpY2xlLAogIHVwZGF0ZUFydGljbGV9IGZyb20gJy4uLy4uLy4uL2FwaScKaW1wb3J0IEFydGljbGVFZGl0IGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvQXJ0aWNsZUVkaXQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFydGljbGVNYW5hZ2UiLAogIGNvbXBvbmVudHM6e1BhZ2luYXRpb24sQXJ0aWNsZUVkaXR9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIGFydGljbGVMaXN0IDogW10sCgogICAgICAvL+WIhumhtQogICAgICB0b3RhbDowLAoKICAgICAgLy/nvJbovpEKICAgICAgZGlhbG9nVmlzaWJsZSA6IGZhbHNlLAogICAgICBkZWZhdWx0RGF0YSA6IG51bGwsCgogICAgICAvLwogICAgICBQYWdpbmF0aW9uSW5kZXggOiAxLAogICAgICBQYWdpbmF0aW9uU2l6ZSA6IDUKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgaGFuZGxlRWRpdChpbmRleCxyb3cpewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmRlZmF1bHREYXRhID0gcm93OwogICAgfSwKICAgIGhhbmRsZURlbGV0ZShpbmRleCxyb3cpewogICAgICBkZWxldGVBcnRpY2xlKHJvdy5faWQpLnRoZW4ocmVzPT57CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbiA6IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5hcnRpY2xlTGlzdC5zcGxpY2UoaW5kZXgsMSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKT0+ewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pSIsCiAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgfSk7CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUGFnaW5hdGlvbkNsaWNrKGluZGV4LHNpemUpewogICAgICB0aGlzLlBhZ2luYXRpb25JbmRleCA9IGluZGV4OwogICAgICB0aGlzLlBhZ2luYXRpb25TaXplID0gc2l6ZTsKICAgICAgdGhpcy5jaGFuZ2VBcnRpY2xlTGlzdCgpOwogICAgICB0aGlzLmNoYW5nZUFydGljbGVJbmZvVG90YWwoKTsKICAgIH0sCgogICAgaGFuZGxlU3VibWl0KGRhdGEpewogICAgICB1cGRhdGVBcnRpY2xlKHRoaXMuZGVmYXVsdERhdGEuX2lkLGRhdGEpCiAgICAgICAgLnRoZW4ocmVzPT57CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pu05paw5oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VBcnRpY2xlTGlzdCgpOwogICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgICAgICAgfSwxMDAwKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmm7TmlrDlpLHotKUiLAogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuabtOaWsOWksei0pSIsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIGR1cmF0aW9uIDogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKXsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAoKICAgIGNoYW5nZUFydGljbGVMaXN0KCl7CiAgICAgIGxldCBza2lwID0gdGhpcy5QYWdpbmF0aW9uU2l6ZSoodGhpcy5QYWdpbmF0aW9uSW5kZXgtMSk7CiAgICAgIGdldEFydGljbGUoc2tpcCx0aGlzLlBhZ2luYXRpb25TaXplKQogICAgICAgIC50aGVuKHJlcz0+ewogICAgICAgICAgdGhpcy5hcnRpY2xlTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGNoYW5nZUFydGljbGVJbmZvVG90YWwoKXsKICAgICAgZ2V0QXJ0aWNsZUluZm8oKQogICAgICAgIC50aGVuKHJlcz0+ewogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGE/cmVzLmRhdGEuZGF0YS5udW06MDsKICAgICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvL+ivt+axguaWh+eroOS/oeaBrwogICAgdGhpcy5jaGFuZ2VBcnRpY2xlSW5mb1RvdGFsKCk7CgogICAgLy/or7fmsYLliJ3lp4vmlofnq6AKICAgIHRoaXMuY2hhbmdlQXJ0aWNsZUxpc3QoKTsKICB9Cn0KCg=="},{"version":3,"sources":["ArticleManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ArticleManage.vue","sourceRoot":"src/views/Admin/Article","sourcesContent":["<template>\n  <div>\n    <el-table\n        :data=\"articleList\"\n        style=\"width: 100%\">\n      <el-table-column\n          label=\"标题\"\n          width=\"180\"\n          prop=\"title\"\n      >\n      </el-table-column>\n      <el-table-column\n          label=\"时间\"\n          width=\"180\"\n          prop=\"date\"\n      >\n      </el-table-column>\n      <el-table-column\n          label=\"分类\"\n          width=\"180\"\n          prop=\"type\"\n      >\n      </el-table-column>\n      <el-table-column\n          label=\"标签\"\n          width=\"180\"\n          prop=\"tag\"\n      >\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n              size=\"mini\"\n              @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\n          <el-button\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <Pagination\n        :pageSize=\"5\"\n        :total=\"total\"\n        @currentChange=\"handlePaginationClick\"\n    ></Pagination>\n    <el-dialog\n        title=\"提示\"\n        :visible.sync=\"dialogVisible\"\n        width=\"60%\"\n        :before-close=\"handleClose\"\n        :close-on-click-modal=\"false\"\n    >\n      <ArticleEdit\n          @handleSubmit=\"handleSubmit\"\n          :default-data=\"defaultData\"\n      ></ArticleEdit>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Pagination from \"../../../components/Pagination\";\n  import {\n    getArticleInfo,\n    getArticle,\n    deleteArticle,\n    updateArticle} from '../../../api'\n  import ArticleEdit from \"../../../components/ArticleEdit\";\n  export default {\n    name: \"ArticleManage\",\n    components:{Pagination,ArticleEdit},\n    data(){\n      return {\n        articleList : [],\n\n        //分页\n        total:0,\n\n        //编辑\n        dialogVisible : false,\n        defaultData : null,\n\n        //\n        PaginationIndex : 1,\n        PaginationSize : 5\n      }\n    },\n    methods:{\n      handleEdit(index,row){\n        this.dialogVisible = true;\n        this.defaultData = row;\n      },\n      handleDelete(index,row){\n        deleteArticle(row._id).then(res=>{\n          if (res.data.code === 0) {\n            this.$message({\n              message: \"删除成功\",\n              type: 'success',\n              duration : 2000\n            });\n            this.articleList.splice(index,1);\n          }\n        }).catch(()=>{\n          this.$message({\n            message: \"删除失败\",\n            type: 'error',\n            duration : 2000\n          });\n        })\n      },\n      handlePaginationClick(index,size){\n        this.PaginationIndex = index;\n        this.PaginationSize = size;\n        this.changeArticleList();\n        this.changeArticleInfoTotal();\n      },\n\n      handleSubmit(data){\n        updateArticle(this.defaultData._id,data)\n          .then(res=>{\n            if (res.data.code === 0) {\n              this.$message({\n                message: \"更新成功\",\n                type: 'success',\n                duration : 2000\n              });\n              setTimeout(()=>{\n                this.changeArticleList();\n                this.handleClose();\n              },1000)\n            }else{\n              this.$message({\n                message: \"更新失败\",\n                type: 'error',\n                duration : 2000\n              });\n            }\n          })\n          .catch(()=>{\n            this.$message({\n              message: \"更新失败\",\n              type: 'error',\n              duration : 2000\n            });\n          });\n      },\n      handleClose(){\n        this.dialogVisible = false;\n      },\n\n      changeArticleList(){\n        let skip = this.PaginationSize*(this.PaginationIndex-1);\n        getArticle(skip,this.PaginationSize)\n          .then(res=>{\n            this.articleList = res.data.data;\n          });\n      },\n\n      changeArticleInfoTotal(){\n        getArticleInfo()\n          .then(res=>{\n            this.total = res.data.data?res.data.data.num:0;\n          });\n      }\n    },\n    mounted() {\n      //请求文章信息\n      this.changeArticleInfoTotal();\n\n      //请求初始文章\n      this.changeArticleList();\n    }\n  }\n\n</script>\n\n<style scoped>\n\n</style>\n"]}]}