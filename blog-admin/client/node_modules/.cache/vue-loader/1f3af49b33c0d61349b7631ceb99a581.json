{"remainingRequest":"F:\\blog_server2\\blog-admin\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\blog_server2\\blog-admin\\client\\src\\views\\Admin\\User\\UserAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\blog_server2\\blog-admin\\client\\src\\views\\Admin\\User\\UserAdmin.vue","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1595078120000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0VXNlckxpc3QsZGVsZXRlVXNlcix1cGRhdGVVc2VyfSBmcm9tICcuLi8uLi8uLi9hcGknOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyQWRtaW4iLAogIGNvbXBvbmVudHM6e30sCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgdXNlckxpc3QgOiBbXSwKICAgICAgbWV0YURhdGEgOiBbXQogICAgfQogIH0sCiAgbWV0aG9kczp7CiAgICBoYW5kbGVTYXZlKGluZGV4LHJvdyl7CiAgICAgIHVwZGF0ZVVzZXIocm93Ll9pZCx7ZGlzYWJsZWQ6cm93LmRpc2FibGVkLGFkbWluOnJvdy5hZG1pbn0pCiAgICAgICAgLnRoZW4ocmVzPT57CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2UgOiAi5pu05paw5oiQ5YqfIiwKICAgICAgICAgICAgICB0eXBlIDogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIGR1cmF0aW9uIDogMjAwMAogICAgICAgICAgICB9KTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlIDogIuabtOaWsOWksei0pSIsCiAgICAgICAgICAgICAgdHlwZSA6ICJlcnJvciIsCiAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZSA6ICLmm7TmlrDlpLHotKUiLAogICAgICAgICAgICB0eXBlIDogImVycm9yIiwKICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZURlbGV0ZShpbmRleCxyb3cpewogICAgICB0aGlzLiRjb25maXJtKCfljbPlsIbliKDpmaTor6XnlKjmiLflj4rlhbbnlZnoqIDnrYnmlbDmja4sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkKICAgICAgICAudGhlbigoKT0+ewogICAgICAgICAgZGVsZXRlVXNlcihyb3cuX2lkKQogICAgICAgICAgICAudGhlbihyZXM9PnsKICAgICAgICAgICAgICB0aGlzLnVzZXJMaXN0LnNwbGljZShpbmRleCwxKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip8iLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKT0+ewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pSIsCiAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgICAgZHVyYXRpb24gOiAyMDAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCk9PnsKCiAgICAgICAgfSkKCiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKGluZGV4LHJvdyl7CiAgICAgIGxldCBtZXRhRGF0YSA9IHRoaXMubWV0YURhdGFbaW5kZXhdOwogICAgICByb3cuc3dpdGNoID0gbWV0YURhdGEuZGlzYWJsZWQgPT09IHJvdy5kaXNhYmxlZCAmJiBtZXRhRGF0YS5hZG1pbiA9PT0gcm93LmFkbWluOwogICAgfSwKCiAgICBnZXRVc2VyTGlzdCgpewogICAgICBnZXRVc2VyTGlzdCgpLnRoZW4ocmVzPT57CiAgICAgICAgdGhpcy5tZXRhRGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgdGhpcy51c2VyTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOwogICAgICAgIHRoaXMudXNlckxpc3QuZm9yRWFjaChpdGVtPT4oaXRlbS5zd2l0Y2g9dHJ1ZSkpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgfQp9Cg=="},{"version":3,"sources":["UserAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAdmin.vue","sourceRoot":"src/views/Admin/User","sourcesContent":["<template>\n  <div>\n    <el-table\n        :data=\"userList\"\n        style=\"width: 100%\">\n      <el-table-column\n          label=\"用户名\"\n          width=\"180\"\n          prop=\"user\"\n      >\n      </el-table-column>\n      <el-table-column\n          label=\"禁用\"\n          width=\"180\"\n      >\n        <template slot-scope=\"scope\">\n          <el-switch v-model=\"scope.row.disabled\" @change=\"handleChange(scope.$index, scope.row)\"></el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column\n          label=\"是否管理员\"\n          width=\"180\"\n      >\n        <template slot-scope=\"scope\">\n          <el-switch v-model=\"scope.row.admin\" @change=\"handleChange(scope.$index, scope.row)\"></el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n              size=\"mini\"\n              type=\"success\"\n              :disabled=\"scope.row.switch\"\n              @click=\"handleSave(scope.$index, scope.row)\">保存</el-button>\n          <el-button\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\n  import {getUserList,deleteUser,updateUser} from '../../../api';\n\n  export default {\n    name: \"UserAdmin\",\n    components:{},\n    data(){\n      return {\n        userList : [],\n        metaData : []\n      }\n    },\n    methods:{\n      handleSave(index,row){\n        updateUser(row._id,{disabled:row.disabled,admin:row.admin})\n          .then(res=>{\n            if (res.data.code === 0) {\n              this.getUserList();\n              this.$message({\n                message : \"更新成功\",\n                type : \"success\",\n                duration : 2000\n              });\n            }else{\n              this.$message({\n                message : \"更新失败\",\n                type : \"error\",\n                duration : 2000\n              });\n            }\n          })\n          .catch(()=>{\n            this.$message({\n              message : \"更新失败\",\n              type : \"error\",\n              duration : 2000\n            });\n          })\n      },\n      handleDelete(index,row){\n        this.$confirm('即将删除该用户及其留言等数据, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n          .then(()=>{\n            deleteUser(row._id)\n              .then(res=>{\n                this.userList.splice(index,1);\n                this.$message({\n                  message: \"删除成功\",\n                  type: 'success',\n                  duration : 2000\n                });\n              })\n              .catch(()=>{\n                this.$message({\n                  message: \"删除失败\",\n                  type: 'error',\n                  duration : 2000\n                });\n              })\n          })\n          .catch(()=>{\n\n          })\n\n      },\n      handleChange(index,row){\n        let metaData = this.metaData[index];\n        row.switch = metaData.disabled === row.disabled && metaData.admin === row.admin;\n      },\n\n      getUserList(){\n        getUserList().then(res=>{\n          this.metaData = res.data.data;\n          this.userList = JSON.parse(JSON.stringify(res.data.data));\n          this.userList.forEach(item=>(item.switch=true));\n        });\n      }\n    },\n    mounted() {\n      this.getUserList();\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}