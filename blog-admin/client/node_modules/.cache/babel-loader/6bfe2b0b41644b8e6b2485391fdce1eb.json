{"remainingRequest":"F:\\blog_server2\\blog-admin\\client\\node_modules\\thread-loader\\dist\\cjs.js!F:\\blog_server2\\blog-admin\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\blog_server2\\blog-admin\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\blog_server2\\blog-admin\\client\\src\\views\\Admin\\User\\UserAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\blog_server2\\blog-admin\\client\\src\\views\\Admin\\User\\UserAdmin.vue","mtime":1586786922221},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595078120000},{"path":"F:\\blog_server2\\blog-admin\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1595078120000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VXNlckxpc3QgYXMgX2dldFVzZXJMaXN0LCBkZWxldGVVc2VyLCB1cGRhdGVVc2VyIH0gZnJvbSAnLi4vLi4vLi4vYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyQWRtaW4iLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyTGlzdDogW10sCiAgICAgIG1ldGFEYXRhOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNhdmU6IGZ1bmN0aW9uIGhhbmRsZVNhdmUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdXBkYXRlVXNlcihyb3cuX2lkLCB7CiAgICAgICAgZGlzYWJsZWQ6IHJvdy5kaXNhYmxlZCwKICAgICAgICBhZG1pbjogcm93LmFkbWluCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICBfdGhpcy5nZXRVc2VyTGlzdCgpOwoKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuabtOaWsOaIkOWKnyIsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLmm7TmlrDlpLHotKUiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuabtOaWsOWksei0pSIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+WNs+WwhuWIoOmZpOivpeeUqOaIt+WPiuWFtueVmeiogOetieaVsOaNriwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxldGVVc2VyKHJvdy5faWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMyLnVzZXJMaXN0LnNwbGljZShpbmRleCwgMSk7CgogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyIsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTlpLHotKUiLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShpbmRleCwgcm93KSB7CiAgICAgIHZhciBtZXRhRGF0YSA9IHRoaXMubWV0YURhdGFbaW5kZXhdOwogICAgICByb3cuc3dpdGNoID0gbWV0YURhdGEuZGlzYWJsZWQgPT09IHJvdy5kaXNhYmxlZCAmJiBtZXRhRGF0YS5hZG1pbiA9PT0gcm93LmFkbWluOwogICAgfSwKICAgIGdldFVzZXJMaXN0OiBmdW5jdGlvbiBnZXRVc2VyTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBfZ2V0VXNlckxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMubWV0YURhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgIF90aGlzMy51c2VyTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOwoKICAgICAgICBfdGhpczMudXNlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uc3dpdGNoID0gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogIH0KfTs="},{"version":3,"sources":["UserAdmin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n        :data=\"userList\"\r\n        style=\"width: 100%\">\r\n      <el-table-column\r\n          label=\"用户名\"\r\n          width=\"180\"\r\n          prop=\"user\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"禁用\"\r\n          width=\"180\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.disabled\" @change=\"handleChange(scope.$index, scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          label=\"是否管理员\"\r\n          width=\"180\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-switch v-model=\"scope.row.admin\" @change=\"handleChange(scope.$index, scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n              size=\"mini\"\r\n              type=\"success\"\r\n              :disabled=\"scope.row.switch\"\r\n              @click=\"handleSave(scope.$index, scope.row)\">保存</el-button>\r\n          <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {getUserList,deleteUser,updateUser} from '../../../api';\r\n\r\n  export default {\r\n    name: \"UserAdmin\",\r\n    components:{},\r\n    data(){\r\n      return {\r\n        userList : [],\r\n        metaData : []\r\n      }\r\n    },\r\n    methods:{\r\n      handleSave(index,row){\r\n        updateUser(row._id,{disabled:row.disabled,admin:row.admin})\r\n          .then(res=>{\r\n            if (res.data.code === 0) {\r\n              this.getUserList();\r\n              this.$message({\r\n                message : \"更新成功\",\r\n                type : \"success\",\r\n                duration : 2000\r\n              });\r\n            }else{\r\n              this.$message({\r\n                message : \"更新失败\",\r\n                type : \"error\",\r\n                duration : 2000\r\n              });\r\n            }\r\n          })\r\n          .catch(()=>{\r\n            this.$message({\r\n              message : \"更新失败\",\r\n              type : \"error\",\r\n              duration : 2000\r\n            });\r\n          })\r\n      },\r\n      handleDelete(index,row){\r\n        this.$confirm('即将删除该用户及其留言等数据, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        })\r\n          .then(()=>{\r\n            deleteUser(row._id)\r\n              .then(res=>{\r\n                this.userList.splice(index,1);\r\n                this.$message({\r\n                  message: \"删除成功\",\r\n                  type: 'success',\r\n                  duration : 2000\r\n                });\r\n              })\r\n              .catch(()=>{\r\n                this.$message({\r\n                  message: \"删除失败\",\r\n                  type: 'error',\r\n                  duration : 2000\r\n                });\r\n              })\r\n          })\r\n          .catch(()=>{\r\n\r\n          })\r\n\r\n      },\r\n      handleChange(index,row){\r\n        let metaData = this.metaData[index];\r\n        row.switch = metaData.disabled === row.disabled && metaData.admin === row.admin;\r\n      },\r\n\r\n      getUserList(){\r\n        getUserList().then(res=>{\r\n          this.metaData = res.data.data;\r\n          this.userList = JSON.parse(JSON.stringify(res.data.data));\r\n          this.userList.forEach(item=>(item.switch=true));\r\n        });\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getUserList();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/Admin/User"}]}